// ============================================================
// SEED DATA — The Foundation
// All pre-seeded game data: Map Nodes, Entities, Items, Loot Tables
//
// RARITY SCALE: 1.0 (dirt-common) → 0.0000000001 (mythic-tier)
//   1.0 - 0.5    = Common (trash, basic supplies)
//   0.5 - 0.2    = Uncommon (decent weapons, useful gear)
//   0.2 - 0.05   = Rare (strong equipment, unique finds)
//   0.05 - 0.01  = Epic (boss drops, powerful gear)
//   0.01 - 0.001 = Legendary (one-of-a-kind relics)
//   < 0.001      = Mythic (reality-breaking artifacts)
// ============================================================

// --- NODE GRAPH (The Map) ---
// First floor: a graph of connected rooms/zones
const MAP_NODES = [
    {
        nodeId: 'entrance_plaza',
        zoneType: 'CollapsedStreet',
        baseDescription: 'A shattered city plaza. Cracked asphalt buckles upward in frozen waves. Overturned cars form crude barricades. The sky is a sickly amber through the dust.',
        connections: { n: 'ruined_market', s: null, e: 'collapsed_alley', w: 'parking_garage', down: null },
        hazardLevel: 1,
        entities: ['tutorial_guide_01'],
        items: ['rusty_pipe', 'health_potion_small'],
    },
    {
        nodeId: 'ruined_market',
        zoneType: 'StorageRoom',
        baseDescription: 'A gutted convenience store. Shelves toppled like dominoes. Shattered glass everywhere. The refrigerator hums faintly despite having no power.',
        connections: { n: 'corridor_north', s: 'entrance_plaza', e: 'stairwell_east', w: null, down: null },
        hazardLevel: 1,
        entities: ['goblin_scavenger_01'],
        items: ['scrap_metal', 'dirty_boots'],
    },
    {
        nodeId: 'collapsed_alley',
        zoneType: 'Corridor',
        baseDescription: 'A narrow alley crushed between two leaning buildings. Rubble chokes the passage. Something skitters in the shadows above.',
        connections: { n: 'stairwell_east', s: null, e: null, w: 'entrance_plaza', down: null },
        hazardLevel: 2,
        entities: ['rat_swarm_01'],
        items: ['scrap_metal'],
    },
    {
        nodeId: 'parking_garage',
        zoneType: 'CollapsedStreet',
        baseDescription: 'A multi-level parking garage, the upper floors pancaked down. Concrete pillars groan under impossible weight. Oil slicks rainbow the floor.',
        connections: { n: null, s: null, e: 'entrance_plaza', w: null, down: 'subway_entrance' },
        hazardLevel: 3,
        entities: ['goblin_brute_01'],
        items: ['iron_lootbox'],
    },
    {
        nodeId: 'stairwell_east',
        zoneType: 'Stairwell',
        baseDescription: 'A concrete stairwell, emergency lighting flickering red. The handrail is bent at impossible angles. Dust falls from above like snow.',
        connections: { n: 'safe_room_01', s: 'collapsed_alley', e: null, w: 'ruined_market', down: 'maintenance_tunnel' },
        hazardLevel: 2,
        entities: [],
        items: ['health_potion_small'],
    },
    {
        nodeId: 'corridor_north',
        zoneType: 'Corridor',
        baseDescription: 'A long hallway of an office building. Fluorescent tubes dangle from the ceiling, sparking occasionally. Cubicle walls lie in heaps.',
        connections: { n: 'server_room', s: 'ruined_market', e: 'safe_room_01', w: 'janitor_closet', down: null },
        hazardLevel: 1,
        entities: ['goblin_scavenger_02'],
        items: [],
    },
    {
        nodeId: 'safe_room_01',
        zoneType: 'SafeRoom',
        baseDescription: 'A reinforced break room. Someone barricaded it with filing cabinets. A camp stove sits cold in the corner. Relatively intact.',
        connections: { n: null, s: 'stairwell_east', e: null, w: 'corridor_north', down: null },
        hazardLevel: 0,
        entities: ['merchant_npc_01'],
        items: ['health_potion_large'],
    },
    {
        nodeId: 'server_room',
        zoneType: 'StorageRoom',
        baseDescription: 'Rows of dead server racks. Blinking lights from a single functioning unit. The air is frigid and smells of ozone and burnt plastic.',
        connections: { n: null, s: 'corridor_north', e: null, w: null, down: null },
        hazardLevel: 1,
        entities: ['neighborhood_cat_01'],
        items: ['data_chip', 'scrap_metal'],
    },
    {
        nodeId: 'janitor_closet',
        zoneType: 'StorageRoom',
        baseDescription: 'A cramped utility closet. Mops and chemical bottles. A vent in the ceiling has been pried open from the inside.',
        connections: { n: null, s: null, e: 'corridor_north', w: null, down: null },
        hazardLevel: 0,
        entities: [],
        items: ['chemical_spray', 'dirty_boots'],
    },
    {
        nodeId: 'subway_entrance',
        zoneType: 'SubwayTunnel',
        baseDescription: 'The mouth of a subway station. Turnstiles bent and broken. The escalator descends into absolute darkness. Wet air exhales from below.',
        connections: { n: null, s: null, e: 'subway_platform', w: null, down: null },
        hazardLevel: 3,
        entities: ['goblin_scavenger_03'],
        items: ['bronze_lootbox'],
    },
    {
        nodeId: 'subway_platform',
        zoneType: 'SubwayTunnel',
        baseDescription: 'An abandoned subway platform. Tile walls are cracked and weeping moisture. A derailed train car sits sideways on the tracks, gutted.',
        connections: { n: null, s: null, e: null, w: 'subway_entrance', down: null },
        hazardLevel: 4,
        entities: ['subway_crawler_01'],
        items: ['silver_lootbox', 'scrap_metal'],
    },
    {
        nodeId: 'maintenance_tunnel',
        zoneType: 'SubwayTunnel',
        baseDescription: 'A narrow maintenance passage lined with pipes and conduits. Steam hisses from joints. The floor is ankle-deep in murky water.',
        connections: { n: 'subway_entrance', s: null, e: null, w: null, down: null },
        hazardLevel: 3,
        entities: ['rat_swarm_02'],
        items: ['rusty_pipe', 'health_potion_small'],
    },
];

// --- ENTITY REGISTRY (Mobs & NPCs) ---
const ENTITIES = [
    {
        entityId: 'tutorial_guide_01',
        name: 'Flickering Hologram',
        entityClass: 'TutorialGuide',
        hp: 999, maxHp: 999,
        attack: 0, defense: 99,
        actionTags: ['helpful', 'patient', 'condescending'],
        lootTableId: null,
        respawns: true,
        xpReward: 0,
        rarity: 1.0,
        dialogue: [
            "Welcome, crawler. You're not dead yet. That's a start.",
            "Type commands to interact. Move, fight, loot. Try not to embarrass yourself.",
            "The System is watching. It always is."
        ],
    },
    {
        entityId: 'goblin_scavenger_01',
        name: 'Scavenger Goblin',
        entityClass: 'ScavengerGoblin',
        hp: 15, maxHp: 15,
        attack: 4, defense: 1,
        actionTags: ['skittish', 'loot-hoarder', 'cowardly'],
        lootTableId: 'loot_common',
        respawns: true,
        xpReward: 20,
        rarity: 0.85,
    },
    {
        entityId: 'goblin_scavenger_02',
        name: 'Scavenger Goblin',
        entityClass: 'ScavengerGoblin',
        hp: 18, maxHp: 18,
        attack: 5, defense: 2,
        actionTags: ['aggressive', 'loot-hoarder', 'territorial'],
        lootTableId: 'loot_common',
        respawns: true,
        xpReward: 25,
        rarity: 0.80,
    },
    {
        entityId: 'goblin_scavenger_03',
        name: 'Tunnel Goblin',
        entityClass: 'ScavengerGoblin',
        hp: 22, maxHp: 22,
        attack: 6, defense: 3,
        actionTags: ['aggressive', 'ambusher', 'dark-adapted'],
        lootTableId: 'loot_uncommon',
        respawns: true,
        xpReward: 35,
        rarity: 0.55,
    },
    {
        entityId: 'goblin_brute_01',
        name: 'Goblin Brute',
        entityClass: 'GoblinBrute',
        hp: 40, maxHp: 40,
        attack: 8, defense: 5,
        actionTags: ['aggressive', 'slow', 'heavy-hitter', 'intimidating'],
        lootTableId: 'loot_uncommon',
        respawns: false,
        xpReward: 60,
        rarity: 0.25,
    },
    {
        entityId: 'rat_swarm_01',
        name: 'Rat Swarm',
        entityClass: 'RatSwarm',
        hp: 10, maxHp: 10,
        attack: 3, defense: 0,
        actionTags: ['skittish', 'swarming', 'disease-carrier'],
        lootTableId: 'loot_junk',
        respawns: true,
        xpReward: 10,
        rarity: 0.95,
    },
    {
        entityId: 'rat_swarm_02',
        name: 'Sewer Rat Swarm',
        entityClass: 'RatSwarm',
        hp: 14, maxHp: 14,
        attack: 4, defense: 0,
        actionTags: ['aggressive', 'swarming', 'disease-carrier', 'waterborne'],
        lootTableId: 'loot_junk',
        respawns: true,
        xpReward: 15,
        rarity: 0.75,
    },
    {
        entityId: 'neighborhood_cat_01',
        name: 'Princess Donut',
        entityClass: 'NeighborhoodCat',
        hp: 8, maxHp: 8,
        attack: 2, defense: 1,
        actionTags: ['regal', 'dismissive', 'unpredictable', 'adorable'],
        lootTableId: 'loot_rare',
        respawns: false,
        xpReward: 5,
        rarity: 0.10,
    },
    {
        entityId: 'subway_crawler_01',
        name: 'Subway Crawler',
        entityClass: 'SubwayCrawler',
        hp: 55, maxHp: 55,
        attack: 10, defense: 6,
        actionTags: ['aggressive', 'ambusher', 'terrifying', 'venomous'],
        lootTableId: 'loot_rare',
        respawns: false,
        xpReward: 100,
        rarity: 0.08,
    },
    {
        entityId: 'merchant_npc_01',
        name: 'Grizzled Survivor',
        entityClass: 'Merchant',
        hp: 999, maxHp: 999,
        attack: 0, defense: 99,
        actionTags: ['cautious', 'gruff', 'fair-dealer'],
        lootTableId: null,
        respawns: true,
        xpReward: 0,
        rarity: 0.30,
        dialogue: [
            "Got goods. Got prices. Don't got patience.",
            "You look like you crawled here through a meat grinder. Need supplies?",
        ],
    },
];

// --- ITEMS & LOOT TABLES ---
// 64 total items (14 original + 50 new)
const ITEMS = [
    // ================================================================
    // WEAPONS (18 total)
    // ================================================================
    {
        itemId: 'rusty_pipe',
        name: 'Rusty Pipe',
        type: 'weapon',
        stats: { attack: 3 },
        tier: 'common',
        rarity: 0.90,
        description: 'A length of corroded plumbing. It\'ll hurt, but so will the tetanus.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'sharpened_rebar',
        name: 'Sharpened Rebar',
        type: 'weapon',
        stats: { attack: 6 },
        tier: 'iron',
        rarity: 0.45,
        description: 'Construction steel ground to a point. Civilization repurposed.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'chemical_spray',
        name: 'Chemical Spray Bottle',
        type: 'weapon',
        stats: { attack: 4 },
        tier: 'common',
        rarity: 0.70,
        description: 'Industrial cleaner. Burns on contact. Do not drink. Seriously.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'nail_bat',
        name: 'Nail-Studded Bat',
        type: 'weapon',
        stats: { attack: 8 },
        tier: 'bronze',
        rarity: 0.15,
        description: 'A baseball bat decorated with roofing nails. Someone loved this thing.',
        isCustom: false,
        slot: 'weapon',
    },
    // --- NEW WEAPONS ---
    {
        itemId: 'broken_bottle',
        name: 'Broken Bottle',
        type: 'weapon',
        stats: { attack: 2 },
        tier: 'common',
        rarity: 0.95,
        description: 'Shattered glass duct-taped to a handle. It\'s barely a weapon, but the System doesn\'t judge. Actually, it does.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'crowbar',
        name: 'Crowbar',
        type: 'weapon',
        stats: { attack: 5 },
        tier: 'common',
        rarity: 0.65,
        description: 'The classic zombie apocalypse multitool. Opens doors, opens skulls.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'fire_axe',
        name: 'Fire Axe',
        type: 'weapon',
        stats: { attack: 9 },
        tier: 'bronze',
        rarity: 0.18,
        description: 'Ripped from a wall-mounted emergency case. Still sharp. Still red.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'stun_baton',
        name: 'Sparking Stun Baton',
        type: 'weapon',
        stats: { attack: 7 },
        tier: 'iron',
        rarity: 0.35,
        description: 'Police-issue electroshock weapon. Still holds a partial charge. Makes a very satisfying zap noise.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'machete',
        name: 'Notched Machete',
        type: 'weapon',
        stats: { attack: 10 },
        tier: 'bronze',
        rarity: 0.12,
        description: 'Heavy, dented, and stained with things you don\'t want to identify. Each notch on the handle is a story.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'pipe_wrench',
        name: 'Heavy Pipe Wrench',
        type: 'weapon',
        stats: { attack: 6 },
        tier: 'iron',
        rarity: 0.40,
        description: 'Two feet of forged steel designed to turn pipes. Turns other things too.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'glass_shard_gauntlet',
        name: 'Glass Shard Gauntlet',
        type: 'weapon',
        stats: { attack: 7 },
        tier: 'iron',
        rarity: 0.30,
        description: 'A leather work glove with glass shards embedded in the knuckles. It hurts you almost as much as them.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'cattle_prod',
        name: 'Modified Cattle Prod',
        type: 'weapon',
        stats: { attack: 11 },
        tier: 'silver',
        rarity: 0.06,
        description: 'Someone overclocked this thing well past USDA specifications. It arcs blue.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'system_blade',
        name: 'System-Forged Blade',
        type: 'weapon',
        stats: { attack: 14 },
        tier: 'silver',
        rarity: 0.03,
        description: 'A short sword materialized from dungeon matter itself. The edge never dulls. The System stamped a Q/A code on the pommel.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'venom_shiv',
        name: 'Venom-Tipped Shiv',
        type: 'weapon',
        stats: { attack: 12 },
        tier: 'silver',
        rarity: 0.05,
        description: 'A crude blade coated in crawler venom. Each cut burns like acid. Handle with extreme caution.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'graviton_hammer',
        name: 'Graviton Hammer',
        type: 'weapon',
        stats: { attack: 18 },
        tier: 'gold',
        rarity: 0.005,
        description: 'A hammer that warps local gravity with each swing. The System considers it a "prototype." You consider it terrifying.',
        isCustom: false,
        slot: 'weapon',
    },
    {
        itemId: 'null_edge',
        name: 'Null Edge',
        type: 'weapon',
        stats: { attack: 22 },
        tier: 'gold',
        rarity: 0.001,
        description: 'A blade that cuts through probability itself. Where it passes, things simply stop existing. The System refuses to acknowledge it.',
        isCustom: false,
        slot: 'weapon',
    },

    // ================================================================
    // ARMOR (16 total)
    // ================================================================
    {
        itemId: 'dirty_boots',
        name: 'Dirty Combat Boots',
        type: 'armor',
        stats: { defense: 2 },
        tier: 'common',
        rarity: 0.80,
        description: 'Steel-toed and filthy. They smell terrible but your toes will thank you.',
        isCustom: false,
        slot: 'feet',
    },
    {
        itemId: 'hard_hat',
        name: 'Cracked Hard Hat',
        type: 'armor',
        stats: { defense: 3 },
        tier: 'common',
        rarity: 0.70,
        description: 'OSHA-approved for the apocalypse. The crack is purely decorative. Probably.',
        isCustom: false,
        slot: 'head',
    },
    {
        itemId: 'kevlar_vest',
        name: 'Salvaged Kevlar Vest',
        type: 'armor',
        stats: { defense: 6 },
        tier: 'bronze',
        rarity: 0.12,
        description: 'Pried off someone who no longer needed it. Multiple holes. Still mostly works.',
        isCustom: false,
        slot: 'chest',
    },
    // --- NEW ARMOR ---
    {
        itemId: 'duct_tape_vest',
        name: 'Duct Tape Vest',
        type: 'armor',
        stats: { defense: 1 },
        tier: 'common',
        rarity: 0.92,
        description: 'Sixteen layers of duct tape wrapped around a hoodie. Surprisingly effective. Unsurprisingly sweaty.',
        isCustom: false,
        slot: 'chest',
    },
    {
        itemId: 'bike_helmet',
        name: 'Cracked Bike Helmet',
        type: 'armor',
        stats: { defense: 2 },
        tier: 'common',
        rarity: 0.82,
        description: 'Colorful, cracked, and one strap is broken. Your mother would still approve.',
        isCustom: false,
        slot: 'head',
    },
    {
        itemId: 'rubber_galoshes',
        name: 'Rubber Galoshes',
        type: 'armor',
        stats: { defense: 1 },
        tier: 'common',
        rarity: 0.88,
        description: 'Bright yellow rain boots. Zero intimidation factor. Excellent puddle protection.',
        isCustom: false,
        slot: 'feet',
    },
    {
        itemId: 'riot_helmet',
        name: 'Riot Helmet',
        type: 'armor',
        stats: { defense: 5 },
        tier: 'iron',
        rarity: 0.28,
        description: 'Full face shield, chin strap intact. Scratched visor. Makes you look like you mean business.',
        isCustom: false,
        slot: 'head',
    },
    {
        itemId: 'welding_apron',
        name: 'Leather Welding Apron',
        type: 'armor',
        stats: { defense: 4 },
        tier: 'iron',
        rarity: 0.38,
        description: 'Heavy leather apron scorched from industrial work. Fire-resistant and goblin-resistant.',
        isCustom: false,
        slot: 'chest',
    },
    {
        itemId: 'steel_toe_greaves',
        name: 'Steel-Toe Greaves',
        type: 'armor',
        stats: { defense: 4 },
        tier: 'iron',
        rarity: 0.32,
        description: 'Work boots reinforced with salvaged sheet metal. Heavy, but a rat swarm won\'t bother your ankles.',
        isCustom: false,
        slot: 'feet',
    },
    {
        itemId: 'tactical_vest',
        name: 'Tactical Assault Vest',
        type: 'armor',
        stats: { defense: 7 },
        tier: 'bronze',
        rarity: 0.10,
        description: 'Military surplus with MOLLE webbing. Covered in pouches that used to hold someone else\'s hopes.',
        isCustom: false,
        slot: 'chest',
    },
    {
        itemId: 'scrap_helmet',
        name: 'Scrap Metal Helmet',
        type: 'armor',
        stats: { defense: 6 },
        tier: 'bronze',
        rarity: 0.14,
        description: 'Welded from license plates and a colander. It looks ridiculous. It works.',
        isCustom: false,
        slot: 'head',
    },
    {
        itemId: 'reinforced_treads',
        name: 'Reinforced Treads',
        type: 'armor',
        stats: { defense: 5 },
        tier: 'bronze',
        rarity: 0.16,
        description: 'Military boots with tire-rubber soles. Grippy, sturdy, and weirdly comfortable.',
        isCustom: false,
        slot: 'feet',
    },
    {
        itemId: 'crawler_hide_jacket',
        name: 'Crawler Hide Jacket',
        type: 'armor',
        stats: { defense: 9 },
        tier: 'silver',
        rarity: 0.04,
        description: 'Tanned from an actual subway crawler. The leather is purple-black and smells like ozone. Other crawlers avoid you.',
        isCustom: false,
        slot: 'chest',
    },
    {
        itemId: 'system_crown',
        name: 'System-Forged Crown',
        type: 'armor',
        stats: { defense: 10 },
        tier: 'silver',
        rarity: 0.02,
        description: 'A circlet of impossibly thin metal. It floats slightly above your head. The System says it\'s "purely cosmetic." It is not.',
        isCustom: false,
        slot: 'head',
    },
    {
        itemId: 'void_walker_boots',
        name: 'Void Walker Boots',
        type: 'armor',
        stats: { defense: 8 },
        tier: 'silver',
        rarity: 0.035,
        description: 'Boots that leave no footprints. Occasionally, you step slightly outside of reality. It\'s unsettling.',
        isCustom: false,
        slot: 'feet',
    },
    {
        itemId: 'entropy_plate',
        name: 'Entropy Plate Armor',
        type: 'armor',
        stats: { defense: 14 },
        tier: 'gold',
        rarity: 0.003,
        description: 'Armor that absorbs kinetic energy and redistributes it as heat. Your attackers get progressively warmer. Then they boil.',
        isCustom: false,
        slot: 'chest',
    },

    // ================================================================
    // CONSUMABLES (14 total)
    // ================================================================
    {
        itemId: 'health_potion_small',
        name: 'Health Potion (Small)',
        type: 'consumable',
        stats: { healAmount: 15 },
        tier: 'common',
        rarity: 0.85,
        description: 'A vial of suspiciously luminescent red liquid. Tastes like cherry cough syrup and regret.',
        isCustom: false,
    },
    {
        itemId: 'health_potion_large',
        name: 'Health Potion (Large)',
        type: 'consumable',
        stats: { healAmount: 40 },
        tier: 'iron',
        rarity: 0.30,
        description: 'A generous flask of healing. It glows. It hums. Don\'t ask what\'s in it.',
        isCustom: false,
    },
    // --- NEW CONSUMABLES ---
    {
        itemId: 'stale_granola_bar',
        name: 'Stale Granola Bar',
        type: 'consumable',
        stats: { healAmount: 5 },
        tier: 'common',
        rarity: 0.95,
        description: 'Best before: three years ago. Still technically edible. The raisins have evolved.',
        isCustom: false,
    },
    {
        itemId: 'mystery_jerky',
        name: 'Mystery Jerky',
        type: 'consumable',
        stats: { healAmount: 10 },
        tier: 'common',
        rarity: 0.78,
        description: 'Dried meat of indeterminate origin. It could be beef. It could be rat. It\'s protein.',
        isCustom: false,
    },
    {
        itemId: 'first_aid_kit',
        name: 'First Aid Kit',
        type: 'consumable',
        stats: { healAmount: 25 },
        tier: 'iron',
        rarity: 0.35,
        description: 'Half the bandages are used. The antiseptic expired. But the stitching kit still works.',
        isCustom: false,
    },
    {
        itemId: 'adrenaline_shot',
        name: 'Adrenaline Shot',
        type: 'consumable',
        stats: { healAmount: 30 },
        tier: 'iron',
        rarity: 0.25,
        description: 'Military-grade epinephrine auto-injector. Stab it into your thigh and feel everything at once.',
        isCustom: false,
    },
    {
        itemId: 'system_med_vial',
        name: 'System Med-Vial',
        type: 'consumable',
        stats: { healAmount: 50 },
        tier: 'bronze',
        rarity: 0.10,
        description: 'A perfectly cylindrical vial of silver liquid. Heals wounds instantly. The fine print says "may cause temporal displacement."',
        isCustom: false,
    },
    {
        itemId: 'nano_stim',
        name: 'Nano-Stim Injector',
        type: 'consumable',
        stats: { healAmount: 65 },
        tier: 'silver',
        rarity: 0.04,
        description: 'Microscopic repair bots flood your bloodstream. They fix everything. You can feel them crawling. It never stops feeling weird.',
        isCustom: false,
    },
    {
        itemId: 'phoenix_tears',
        name: 'Phoenix Tears',
        type: 'consumable',
        stats: { healAmount: 100 },
        tier: 'gold',
        rarity: 0.008,
        description: 'A vial of liquid flame that doesn\'t burn. Full restoration. The tears of something that refused to die.',
        isCustom: false,
    },
    {
        itemId: 'rat_on_a_stick',
        name: 'Rat-on-a-Stick',
        type: 'consumable',
        stats: { healAmount: 8 },
        tier: 'common',
        rarity: 0.88,
        description: 'Exactly what it sounds like. Charred on the outside, questionable on the inside. Crunchy.',
        isCustom: false,
    },
    {
        itemId: 'energy_drink',
        name: 'Expired Energy Drink',
        type: 'consumable',
        stats: { healAmount: 12 },
        tier: 'common',
        rarity: 0.75,
        description: 'EXTREME MONSTER BLAST flavor. The can is dented and the liquid is brown. Still has caffeine.',
        isCustom: false,
    },
    {
        itemId: 'mushroom_cap',
        name: 'Glowing Mushroom Cap',
        type: 'consumable',
        stats: { healAmount: 20 },
        tier: 'iron',
        rarity: 0.42,
        description: 'A bioluminescent fungus from the subway tunnels. Tastes like dirt and static electricity. Your wounds close.',
        isCustom: false,
    },

    // ================================================================
    // JUNK & CRAFTING (10 total)
    // ================================================================
    {
        itemId: 'scrap_metal',
        name: 'Scrap Metal',
        type: 'junk',
        stats: {},
        tier: 'common',
        rarity: 1.0,
        description: 'Twisted metal fragments. Worthless alone, but the System values persistence.',
        isCustom: false,
    },
    {
        itemId: 'data_chip',
        name: 'Corrupted Data Chip',
        type: 'junk',
        stats: {},
        tier: 'iron',
        rarity: 0.35,
        description: 'A microchip pulled from a dead server. The data on it is probably gibberish. Probably.',
        isCustom: false,
    },
    // --- NEW JUNK ---
    {
        itemId: 'cracked_phone',
        name: 'Cracked Smartphone',
        type: 'junk',
        stats: {},
        tier: 'common',
        rarity: 0.92,
        description: 'Screen shattered, battery at 2%. Someone\'s last text reads: "omw home." They didn\'t make it.',
        isCustom: false,
    },
    {
        itemId: 'old_photograph',
        name: 'Water-Damaged Photograph',
        type: 'junk',
        stats: {},
        tier: 'common',
        rarity: 0.88,
        description: 'A family photo. The faces have bled into watercolor. It means nothing to you and everything to someone who\'s gone.',
        isCustom: false,
    },
    {
        itemId: 'bent_spoon',
        name: 'Bent Spoon',
        type: 'junk',
        stats: {},
        tier: 'common',
        rarity: 0.98,
        description: 'It\'s a spoon. It\'s bent. The System insists it has "sentimental value to the audience."',
        isCustom: false,
    },
    {
        itemId: 'goblin_tooth',
        name: 'Goblin Tooth',
        type: 'junk',
        stats: {},
        tier: 'common',
        rarity: 0.72,
        description: 'A yellowed fang knocked loose from a goblin jaw. Some collectors pay for these. Allegedly.',
        isCustom: false,
    },
    {
        itemId: 'circuit_board',
        name: 'Intact Circuit Board',
        type: 'junk',
        stats: {},
        tier: 'iron',
        rarity: 0.38,
        description: 'A green PCB with gold traces still intact. Some of the components glow faintly in the dark.',
        isCustom: false,
    },
    {
        itemId: 'crawler_fang',
        name: 'Crawler Fang',
        type: 'junk',
        stats: {},
        tier: 'bronze',
        rarity: 0.08,
        description: 'A venomous fang the length of your forearm. Still dripping. Would make a hell of a necklace.',
        isCustom: false,
    },
    {
        itemId: 'system_shard',
        name: 'System Shard',
        type: 'junk',
        stats: {},
        tier: 'silver',
        rarity: 0.02,
        description: 'A fragment of solidified System energy. It hums at frequencies that make your teeth itch. Extremely valuable.',
        isCustom: false,
    },
    {
        itemId: 'void_pearl',
        name: 'Void Pearl',
        type: 'junk',
        stats: {},
        tier: 'gold',
        rarity: 0.002,
        description: 'A perfectly spherical bead of absolute darkness. Light bends around it. It weighs nothing and everything.',
        isCustom: false,
    },

    // ================================================================
    // LOOT BOXES (5 total)
    // ================================================================
    {
        itemId: 'iron_lootbox',
        name: 'Iron Loot Box',
        type: 'lootbox',
        stats: {},
        tier: 'iron',
        rarity: 0.50,
        description: 'A battered metal crate stamped with the System logo. Contains randomized loot.',
        isCustom: false,
    },
    {
        itemId: 'bronze_lootbox',
        name: 'Bronze Loot Box',
        type: 'lootbox',
        stats: {},
        tier: 'bronze',
        rarity: 0.20,
        description: 'A polished bronze container. The System rewards competence. Occasionally.',
        isCustom: false,
    },
    {
        itemId: 'silver_lootbox',
        name: 'Silver Loot Box',
        type: 'lootbox',
        stats: {},
        tier: 'silver',
        rarity: 0.07,
        description: 'A gleaming silver case. Whatever\'s inside, you probably don\'t deserve it.',
        isCustom: false,
    },
    {
        itemId: 'gold_lootbox',
        name: 'Gold Loot Box',
        type: 'lootbox',
        stats: {},
        tier: 'gold',
        rarity: 0.005,
        description: 'A radiant gold container that hums with energy. The System rarely bestows these. The audience goes wild.',
        isCustom: false,
    },

    // ================================================================
    // ACCESSORIES / TRINKETS (5 total) — new item type
    // ================================================================
    {
        itemId: 'lucky_coin',
        name: 'Lucky Coin',
        type: 'accessory',
        stats: { attack: 1, defense: 1 },
        tier: 'iron',
        rarity: 0.40,
        description: 'A coin from before the collapse. It feels warm in your pocket. Coincidence, surely.',
        isCustom: false,
    },
    {
        itemId: 'rat_king_crown',
        name: 'Rat King\'s Crown',
        type: 'accessory',
        stats: { attack: 2, defense: 2 },
        tier: 'bronze',
        rarity: 0.09,
        description: 'A tiny crown woven from rat tails and wire. Wearing it is disgusting. The stat bonus is not.',
        isCustom: false,
    },
    {
        itemId: 'system_eye',
        name: 'System Observer Eye',
        type: 'accessory',
        stats: { attack: 3, defense: 3 },
        tier: 'silver',
        rarity: 0.025,
        description: 'A floating crystalline eye that orbits your head. It whispers enemy weaknesses. It also streams your failures to the audience.',
        isCustom: false,
    },
    {
        itemId: 'donut_collar',
        name: 'Princess Donut\'s Lost Collar',
        type: 'accessory',
        stats: { attack: 5, defense: 5 },
        tier: 'gold',
        rarity: 0.001,
        description: 'A bejeweled cat collar that radiates absurd power. The tag reads "Princess Donut — If found, you\'re already dead."',
        isCustom: false,
    },
    {
        itemId: 'entropy_ring',
        name: 'Ring of Entropy',
        type: 'accessory',
        stats: { attack: 4, defense: 4 },
        tier: 'gold',
        rarity: 0.0008,
        description: 'A ring that slowly corrodes reality around your finger. Your attacks warp. Your defenses bend. Nothing is certain.',
        isCustom: false,
    },
    {
        itemId: 'crawler_bone_dice',
        name: 'Crawler Bone Dice',
        type: 'accessory',
        stats: { attack: 2, defense: 1 },
        tier: 'bronze',
        rarity: 0.13,
        description: 'A pair of dice carved from crawler bone. They always land on favorable numbers. The System calls it "statistically anomalous."',
        isCustom: false,
    },
];

// Loot tables: keyed by lootTableId, weighted pools of itemIds
const LOOT_TABLES = {
    loot_junk: {
        items: [
            { itemId: 'scrap_metal', weight: 50 },
            { itemId: 'bent_spoon', weight: 20 },
            { itemId: 'cracked_phone', weight: 10 },
            { itemId: 'old_photograph', weight: 10 },
            { itemId: 'health_potion_small', weight: 5 },
            { itemId: 'stale_granola_bar', weight: 5 },
        ],
    },
    loot_common: {
        items: [
            { itemId: 'scrap_metal', weight: 25 },
            { itemId: 'health_potion_small', weight: 15 },
            { itemId: 'stale_granola_bar', weight: 10 },
            { itemId: 'mystery_jerky', weight: 10 },
            { itemId: 'goblin_tooth', weight: 10 },
            { itemId: 'rusty_pipe', weight: 8 },
            { itemId: 'broken_bottle', weight: 5 },
            { itemId: 'dirty_boots', weight: 5 },
            { itemId: 'duct_tape_vest', weight: 4 },
            { itemId: 'crowbar', weight: 3 },
            { itemId: 'iron_lootbox', weight: 5 },
        ],
    },
    loot_uncommon: {
        items: [
            { itemId: 'scrap_metal', weight: 12 },
            { itemId: 'health_potion_small', weight: 10 },
            { itemId: 'first_aid_kit', weight: 8 },
            { itemId: 'sharpened_rebar', weight: 10 },
            { itemId: 'stun_baton', weight: 8 },
            { itemId: 'pipe_wrench', weight: 8 },
            { itemId: 'hard_hat', weight: 7 },
            { itemId: 'riot_helmet', weight: 5 },
            { itemId: 'welding_apron', weight: 5 },
            { itemId: 'steel_toe_greaves', weight: 5 },
            { itemId: 'circuit_board', weight: 5 },
            { itemId: 'chemical_spray', weight: 5 },
            { itemId: 'iron_lootbox', weight: 7 },
            { itemId: 'bronze_lootbox', weight: 5 },
        ],
    },
    loot_rare: {
        items: [
            { itemId: 'health_potion_large', weight: 10 },
            { itemId: 'adrenaline_shot', weight: 8 },
            { itemId: 'system_med_vial', weight: 5 },
            { itemId: 'nail_bat', weight: 8 },
            { itemId: 'machete', weight: 6 },
            { itemId: 'fire_axe', weight: 6 },
            { itemId: 'glass_shard_gauntlet', weight: 5 },
            { itemId: 'kevlar_vest', weight: 5 },
            { itemId: 'tactical_vest', weight: 4 },
            { itemId: 'scrap_helmet', weight: 5 },
            { itemId: 'reinforced_treads', weight: 5 },
            { itemId: 'crawler_fang', weight: 4 },
            { itemId: 'lucky_coin', weight: 4 },
            { itemId: 'data_chip', weight: 5 },
            { itemId: 'bronze_lootbox', weight: 12 },
            { itemId: 'silver_lootbox', weight: 8 },
        ],
    },
    loot_epic: {
        items: [
            { itemId: 'system_med_vial', weight: 10 },
            { itemId: 'nano_stim', weight: 8 },
            { itemId: 'cattle_prod', weight: 10 },
            { itemId: 'venom_shiv', weight: 10 },
            { itemId: 'system_blade', weight: 8 },
            { itemId: 'crawler_hide_jacket', weight: 8 },
            { itemId: 'system_crown', weight: 6 },
            { itemId: 'void_walker_boots', weight: 7 },
            { itemId: 'rat_king_crown', weight: 6 },
            { itemId: 'system_eye', weight: 5 },
            { itemId: 'system_shard', weight: 5 },
            { itemId: 'silver_lootbox', weight: 10 },
            { itemId: 'gold_lootbox', weight: 7 },
        ],
    },
    // Loot box tier mappings — what each box can contain
    lootbox_iron: {
        items: [
            { itemId: 'rusty_pipe', weight: 15 },
            { itemId: 'broken_bottle', weight: 10 },
            { itemId: 'crowbar', weight: 10 },
            { itemId: 'dirty_boots', weight: 12 },
            { itemId: 'duct_tape_vest', weight: 10 },
            { itemId: 'bike_helmet', weight: 10 },
            { itemId: 'rubber_galoshes', weight: 8 },
            { itemId: 'health_potion_small', weight: 15 },
            { itemId: 'stale_granola_bar', weight: 10 },
        ],
    },
    lootbox_bronze: {
        items: [
            { itemId: 'sharpened_rebar', weight: 12 },
            { itemId: 'stun_baton', weight: 10 },
            { itemId: 'pipe_wrench', weight: 8 },
            { itemId: 'glass_shard_gauntlet', weight: 8 },
            { itemId: 'fire_axe', weight: 6 },
            { itemId: 'hard_hat', weight: 8 },
            { itemId: 'riot_helmet', weight: 8 },
            { itemId: 'welding_apron', weight: 8 },
            { itemId: 'steel_toe_greaves', weight: 7 },
            { itemId: 'health_potion_large', weight: 10 },
            { itemId: 'first_aid_kit', weight: 8 },
            { itemId: 'circuit_board', weight: 7 },
        ],
    },
    lootbox_silver: {
        items: [
            { itemId: 'nail_bat', weight: 10 },
            { itemId: 'machete', weight: 10 },
            { itemId: 'cattle_prod', weight: 8 },
            { itemId: 'venom_shiv', weight: 8 },
            { itemId: 'kevlar_vest', weight: 8 },
            { itemId: 'tactical_vest', weight: 7 },
            { itemId: 'scrap_helmet', weight: 7 },
            { itemId: 'reinforced_treads', weight: 7 },
            { itemId: 'crawler_hide_jacket', weight: 5 },
            { itemId: 'system_med_vial', weight: 6 },
            { itemId: 'adrenaline_shot', weight: 8 },
            { itemId: 'crawler_fang', weight: 6 },
            { itemId: 'lucky_coin', weight: 5 },
            { itemId: 'rat_king_crown', weight: 5 },
        ],
    },
    lootbox_gold: {
        items: [
            { itemId: 'system_blade', weight: 12 },
            { itemId: 'graviton_hammer', weight: 8 },
            { itemId: 'null_edge', weight: 4 },
            { itemId: 'system_crown', weight: 8 },
            { itemId: 'void_walker_boots', weight: 8 },
            { itemId: 'crawler_hide_jacket', weight: 8 },
            { itemId: 'entropy_plate', weight: 5 },
            { itemId: 'nano_stim', weight: 10 },
            { itemId: 'phoenix_tears', weight: 5 },
            { itemId: 'system_eye', weight: 8 },
            { itemId: 'donut_collar', weight: 4 },
            { itemId: 'entropy_ring', weight: 4 },
            { itemId: 'system_shard', weight: 6 },
            { itemId: 'void_pearl', weight: 3 },
        ],
    },
};

module.exports = { MAP_NODES, ENTITIES, ITEMS, LOOT_TABLES };
